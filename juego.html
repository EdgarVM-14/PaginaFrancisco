<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Flappy Bird - Educaci贸n en Pandemia</title>
    <style>
body { 
            margin: 0; 
            overflow: hidden; 
            text-align: center; 
            font-family: Arial, sans-serif; 
            background: linear-gradient(to right, #70ace0, #5a89b3);
        }
        canvas { 
            display: block; 
        }

        #mensaje {
            position: absolute; 
            top: 50%; 
            left: 50%; 
            transform: translate(-50%, -50%);
            color: white; 
            padding: 20px;
            font-size: 24px;
            font-weight: bold;
            text-shadow: 2px 2px 10px rgba(0, 0, 0, 0.8);
            opacity: 1; 
            transition: opacity 0.8s ease-in-out;
        }

        #mensaje.oculto {
            opacity: 0;
            pointer-events: none;
        }

        .boton1 {
            padding: 12px 20px;
            margin-top: 15px;
            border: none;
            border-radius: 8px;
            background: linear-gradient(45deg, #00aeff, #4f8fad);
            color: white;
            font-size: 18px;
            cursor: pointer;
            transition: background 0.3s, transform 0.2s;
        }

        .boton1:hover {
            background: linear-gradient(45deg, #4f8fad, #00aeff);
            transform: scale(1.1);
        }    </style>
</head>
<body>
    <script>
        function volverAlJuego1() {
            window.location.href = "index.html";
        }
    </script>
    <div id="mensaje">Evita chocar.<br>Presiona cualquier tecla para comenzar.
        <br>
        <button class="boton1" onclick="volverAlJuego1()">Volver a la p谩gina principal</button>
    </div>
    <canvas id="gameCanvas"></canvas>
    <div id="pregunta-container">
        <p id="pregunta"></p>
        <input type="text" id="respuesta">
        <button onclick="verificarRespuesta()">Responder</button>
    </div>
    <div id="ganaste-container" style="display: none;">隆Ganaste un dulce!  隆Muy bien!</div>
    
    <script>
        const canvas = document.getElementById("gameCanvas");
        const ctx = canvas.getContext("2d");
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;
        document.addEventListener("keydown", function() {
            document.getElementById("mensaje").classList.add("oculto");
        });
        const fondoImg = new Image(); fondoImg.src = "img/juegoF.jpeg";
        const pajaroImg = new Image(); pajaroImg.src = "img/pajaro.png";
        const tuboImg = new Image(); tuboImg.src = "img/tubop.jpeg";
        
        let bird = { x: 50, y: canvas.height / 2, radius: 20, velocity: 0, gravity: 0.5, lift: -9 };
        let pipes = [];
        let pipeWidth = 60;
        let pipeGap = 130;
        let pipeSpeed = 4;
        let juegoActivo = false;
        let puntaje = 0;
        let intervaloTubos;
        
        function drawBird() {
            ctx.drawImage(pajaroImg, bird.x - bird.radius, bird.y - bird.radius, bird.radius * 2, bird.radius * 2);
        }

        function drawPipes() {
            pipes.forEach(pipe => {
                ctx.drawImage(tuboImg, pipe.x, 0, pipeWidth, pipe.top);
                ctx.drawImage(tuboImg, pipe.x, pipe.top + pipeGap, pipeWidth, canvas.height - pipe.top - pipeGap);
            });
        }

        function update() {
            if (!juegoActivo) return;
            bird.velocity += bird.gravity;
            bird.y += bird.velocity;
            
            if (bird.y + bird.radius > canvas.height || bird.y - bird.radius < 0) {
                juegoActivo = false;
                mostrarPregunta();
            }
            
            pipes.forEach(pipe => {
                pipe.x -= pipeSpeed;
                if (pipe.x + pipeWidth < 0) {
                    pipes.shift();
                    puntaje++;
                    if (puntaje >= 5) {
                        window.location.href = "ganaste.html"; // Redirige a la p谩gina de victoria
                    }
                }
                if (colision(bird, pipe)) {
                    juegoActivo = false;
                    mostrarPregunta();
                }
            });
            
            ctx.drawImage(fondoImg, 0, 0, canvas.width, canvas.height);
            drawBird();
            drawPipes();
            ctx.fillStyle = "white";
            ctx.font = "20px Arial";
            ctx.fillText("Puntaje: " + puntaje, 20, 30);
            requestAnimationFrame(update);
        }

        function colision(bird, pipe) {
            return (bird.x + bird.radius > pipe.x && bird.x - bird.radius < pipe.x + pipeWidth && 
                (bird.y - bird.radius < pipe.top || bird.y + bird.radius > pipe.top + pipeGap));
        }

        function agregarTubo() {
            let top = Math.random() * (canvas.height - pipeGap - 50) + 20;
            pipes.push({ x: canvas.width, top: top });
        }

        document.addEventListener("keydown", function() {
            if (!juegoActivo) {
                juegoActivo = true;
                document.getElementById("mensaje").classList.remove("mostrar");
                pipes = [];
                puntaje = 0;
                bird.y = canvas.height / 2;
                agregarTubo();
                intervaloTubos = setInterval(agregarTubo, 1500);
                update();
            }
            bird.velocity = bird.lift;
        });

        const preguntas = [
            { pregunta: "驴C贸mo influy贸 la movilidad global en la propagaci贸n del SARS-CoV-2?", respuesta: "si" },
            { pregunta: "驴驴Por qu茅 el confinamiento fue una medida clave para frenar la pandemia?", respuesta: "si" },
            { pregunta: "驴De qu茅 manera la tecnolog铆a ayud贸 a mantener la educaci贸n durante la pandemia?", respuesta: "si" },
            { pregunta: "驴Cu谩les fueron las principales plataformas digitales que surgieron para la educaci贸n en l铆nea?", respuesta: "si" },
            { pregunta: "驴C贸mo afect贸 la pandemia la percepci贸n del conocimiento en los sistemas educativos?", respuesta: "si" },
            { pregunta: "驴Por qu茅 la saturaci贸n de informaci贸n fue un problema para los estudiantes?", respuesta: "si" },
            { pregunta: "驴Cu谩ntos d铆as de ense帽anza se perdieron a nivel global debido al cierre de escuelas?", respuesta: "si" },
            { pregunta: "驴Qu茅 dificultades de conectividad enfrentaron los estudiantes durante la educaci贸n a distancia?", respuesta: "si" },
            { pregunta: "驴C贸mo afect贸 la pandemia el bienestar emocional de los estudiantes y sus familias?", respuesta: "si" },
            { pregunta: "驴Qu茅 problemas econ贸micos surgieron en los hogares como consecuencia del confinamiento?", respuesta: "si" },
            { pregunta: "驴Cu谩ntos estudiantes y docentes se vieron afectados por el cierre de escuelas en marzo de 2020?", respuesta: "si" },
            { pregunta: "驴Qu茅x establece el Acuerdo publicado el 16 de marzo de 2020 en el Diario Oficial de la Federaci贸n?", respuesta: "si" },
            { pregunta: "驴Cu谩ndo se implement贸 oficialmente la educaci贸n a distancia en M茅xico?", respuesta: "si" },
            { pregunta: "驴Qu茅 iniciativa educativa se lanz贸 el 22 de abril de 2020 y qu茅 problem谩ticas evidenci贸?", respuesta: "si" },
            { pregunta: "驴Cu谩ndo comenzaron a reabrir las escuelas y qu茅 medidas se tomaron para garantizar la seguridad?", respuesta: "si" },
            { pregunta: "驴Cu谩l fue la situaci贸n educativa a finales de 2022 tras la relajaci贸n de las restricciones?", respuesta: "si" },
            { pregunta: "驴Crees que la digitalizaci贸n de la educaci贸n benefici贸 o perjudic贸 a los estudiantes? 驴Por qu茅?", respuesta: "si" },
            { pregunta: "驴Qu茅 aprendizajes dej贸 la pandemia en t茅rminos de educaci贸n y acceso a la tecnolog铆a?", respuesta: "si" },
            { pregunta: "驴Qu茅 estrategias podr铆an implementarse para evitar futuras interrupciones en la educaci贸n?", respuesta: "si" },
            { pregunta: "驴C贸mo se podr铆a reducir la brecha digital en la educaci贸n para garantizar igualdad de oportunidades?", respuesta: "si" },

        ];
        function mostrarPregunta() {
        let randomIndex = Math.floor(Math.random() * preguntas.length);
        let pregunta = encodeURIComponent(preguntas[randomIndex].pregunta);
        let respuesta = encodeURIComponent(preguntas[randomIndex].respuesta);
        window.location.href = `preguntas.html?pregunta=${pregunta}&respuesta=${respuesta}`;
    }
        

    </script>
</body>
</html>
